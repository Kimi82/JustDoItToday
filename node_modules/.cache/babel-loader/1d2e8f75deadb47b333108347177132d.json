{"ast":null,"code":"var _jsxFileName = \"/Users/kamil/Desktop/Programowanie/ygo/src/components/todo_list/ToDoList.js\";\nimport React, { useState, useEffect, useRef, useLayoutEffect } from 'react';\nimport './ToDoList.css';\nimport { db } from '../../firebase.js';\nimport firebase from \"firebase\";\nexport default function ToDoList({\n  user\n}) {\n  const [newTaskValue, setTask] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const [doneTasks, setTaskDone] = useState();\n  const today = new Date();\n  const todayDate = String(today.getDate()).padStart(2, '0') + \"_\" + String(today.getMonth() + 1).padStart(2, '0');\n\n  const addTask = e => {\n    //function to add task \n    if (newTaskValue.length >= 3) {\n      e.preventDefault();\n      db.collection(user.displayName).doc(\"ToDoList\").collection(todayDate).add({\n        text: newTaskValue,\n        timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n        isDone: false\n      });\n      setTask('');\n    } else {\n      alert(\"New task must have at least 3 signs\");\n    }\n  };\n\n  useEffect(() => {\n    //function to download task from today.\n    if (user != undefined) {\n      try {\n        db.collection(user.displayName).doc(\"ToDoList\").collection(todayDate) //todayDate\n        .orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n          setTasks(snapshot.docs.map(doc => ({\n            id: doc.id,\n            task: doc.data()\n          })));\n        });\n      } catch {\n        console.log(\"o nie \");\n      }\n    }\n  }, []);\n\n  const useIsMount = () => {\n    //function to return, than first render or no\n    const isMountRef = useRef(true);\n    useEffect(() => {\n      isMountRef.current = false;\n    }, []);\n    return isMountRef.current;\n  };\n\n  const isMount = useIsMount();\n  useEffect(() => {\n    if (!isMount && tasks.length >= 1) {\n      let howManyTaskIsDone = 0;\n\n      for (let i = 0; i <= tasks.length - 1; i++) {\n        if (tasks[i].task.isDone === true) {\n          howManyTaskIsDone += 1;\n          setTaskDone(howManyTaskIsDone);\n        }\n      }\n    }\n  }, [tasks]);\n\n  const setAsDone = e => {\n    db.collection(user.displayName).doc(\"ToDoList\").collection(todayDate).doc(e.target.id).update({\n      isDone: true\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toDoList__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, user.displayName ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toDoList__list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, tasks.map(task => /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, task.task.isDone ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"boxes\",\n    key: task.id,\n    id: task.id,\n    onClick: setAsDone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: task.id,\n    onClick: setAsDone,\n    defaultChecked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    id: task.id,\n    htmlFor: task.id,\n    onClick: setAsDone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  }, task.task.text)) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"boxes\",\n    key: task.id,\n    id: task.id,\n    onClick: setAsDone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    id: task.id,\n    onClick: setAsDone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    id: task.id,\n    htmlFor: task.id,\n    onClick: setAsDone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, task.task.text)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"toDoList__addTask\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"toDoList__input\",\n    type: \"text\",\n    value: newTaskValue,\n    onChange: e => setTask(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"toDoList__button\",\n    onClick: addTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 68\n    }\n  }, \"ADD TASK\")))) : /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 2\n    }\n  }, \"Please refresh the page\"));\n}","map":{"version":3,"sources":["/Users/kamil/Desktop/Programowanie/ygo/src/components/todo_list/ToDoList.js"],"names":["React","useState","useEffect","useRef","useLayoutEffect","db","firebase","ToDoList","user","newTaskValue","setTask","tasks","setTasks","doneTasks","setTaskDone","today","Date","todayDate","String","getDate","padStart","getMonth","addTask","e","length","preventDefault","collection","displayName","doc","add","text","timestamp","firestore","FieldValue","serverTimestamp","isDone","alert","undefined","orderBy","onSnapshot","snapshot","docs","map","id","task","data","console","log","useIsMount","isMountRef","current","isMount","howManyTaskIsDone","i","setAsDone","target","update","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useLayoutEffect} from 'react'\nimport './ToDoList.css'\nimport { db } from '../../firebase.js'\nimport firebase from \"firebase\"\n\nexport default function ToDoList({user}) {\n     const [newTaskValue, setTask] = useState(\"\");\n     const [tasks, setTasks] = useState([]);\n     const [doneTasks, setTaskDone] = useState()\n    \n    const today = new Date()\n    const todayDate = String(today.getDate()).padStart(2, '0') + \"_\" + String(today.getMonth() + 1).padStart(2, '0');\n\n\n    const addTask = (e) => {  //function to add task \n        if(newTaskValue.length >= 3){ \n        e.preventDefault();\n         db.collection(user.displayName).doc(\"ToDoList\").collection(todayDate).add({\n             text: newTaskValue,\n             timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n             isDone: false\n         })\n         setTask('');}\n         else{\n             alert(\"New task must have at least 3 signs\")\n         }\n     }\n\n    \n     useEffect(() => {  //function to download task from today.\n        if(user!=undefined){\n            try{   \n            db \n                .collection(user.displayName)\n                .doc(\"ToDoList\")\n                .collection(todayDate) //todayDate\n                .orderBy(\"timestamp\", \"desc\")\n                .onSnapshot((snapshot) =>{\n                    setTasks(snapshot.docs.map(doc => ({\n                        id: doc.id,\n                        task: doc.data()\n                        })));\n                        }) \n            }\n            catch{console.log(\"o nie \")}} \n       \n    }, [])\n\n\n    const useIsMount = () => { //function to return, than first render or no\n        const isMountRef = useRef(true);\n        useEffect(() => {\n          isMountRef.current = false;\n        }, []);\n        return isMountRef.current;\n      };\n\n    \n        const isMount = useIsMount();\n      \n        useEffect(() => {\n          if (!isMount && tasks.length>=1) {\n            let howManyTaskIsDone = 0;\n            for(let i =0; i<=tasks.length-1; i++){\n                 if(tasks[i].task.isDone === true){\n                    howManyTaskIsDone+=1\n                    setTaskDone(howManyTaskIsDone);\n                    }\n            } \n          }\n        }, [tasks]);\n      \n\n\n    \n\n        \n\n    const setAsDone = (e) => {\n         db.collection(user.displayName).doc(\"ToDoList\").collection(todayDate).doc(e.target.id)\n         .update({isDone: true})\n    }\n    \n\n    \n    return (\n    <div className=\"toDoList__wrapper\">{ user.displayName?\n    <div className=\"toDoList__list\">\n             \n            {tasks.map((task) => (\n                    <span> \n\n                    { task.task.isDone ?\n                    <div className=\"boxes\" key={task.id} id={task.id} onClick={setAsDone} >\n                        <input type=\"checkbox\" id={task.id} onClick={setAsDone} defaultChecked />\n                        <label id={task.id} htmlFor={task.id} onClick={setAsDone}>{task.task.text}</label> \n                    </div>\n                    :\n                    <div className=\"boxes\" key={task.id} id={task.id} onClick={setAsDone} >\n                        <input type=\"checkbox\" id={task.id} onClick={setAsDone} />\n                        <label id={task.id} htmlFor={task.id} onClick={setAsDone}>{task.task.text}</label> \n                    </div>\n\n                        } \n                       \n                    \n\n                        \n                    </span>\n                )\n                \n                )}\n            \n        \n        <div className=\"toDoList__addTask\">\n            <input className=\"toDoList__input\" type=\"text\" value={newTaskValue} onChange={e => setTask(e.target.value)}></input>\n            <button className=\"toDoList__button\" onClick={addTask}><b>ADD TASK</b></button>\n        </div>\n    </div>\n:<h1>Please refresh the page</h1>}</div>\n    )\n\n\n} "]},"metadata":{},"sourceType":"module"}