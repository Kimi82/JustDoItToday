{"ast":null,"code":"var _jsxFileName = \"/Users/kamil/Desktop/Programowanie/ygo/src/components/todo_chart/ToDoChart.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport './ToDoChart.css';\nimport { db } from '../../firebase.js';\nimport firebase from \"firebase\";\nimport { Bar } from 'react-chartjs-2';\nexport default function ToDoList({\n  user\n}) {\n  const [tasks, setTasks] = useState([]);\n  const [doneTasks, setTaskDone] = useState(0);\n  const [doneTaskPercent, setPercent] = useState(0);\n  const today = new Date();\n\n  const DayAsString = dayIndex => {\n    var weekdays = new Array(7);\n    weekdays[0] = \"Sunday\";\n    weekdays[1] = \"Monday\";\n    weekdays[2] = \"Tuesday\";\n    weekdays[3] = \"Wednesday\";\n    weekdays[4] = \"Thursday\";\n    weekdays[5] = \"Friday\";\n    weekdays[6] = \"Saturday\";\n    return weekdays[dayIndex];\n  };\n\n  const GetDates = () => {\n    var aryDates = [];\n\n    for (var i = -6; i <= 0; i++) {\n      var currentDate = new Date();\n      currentDate.setDate(startDate.getDate() + i);\n      aryDates.push(DayAsString(currentDate.getDay()) + \", \" + currentDate.getDate());\n    }\n\n    return aryDates;\n  };\n\n  const firebaseDates = [];\n\n  for (var i = -6; i <= 0; i++) {\n    var currentDate = new Date();\n    currentDate.setDate(today.getDate() + i);\n    firebaseDates.push(DayAsString(currentDate.getDay()) + \"_\" + currentDate.getDate() + \"_\" + currentDate.getMonth());\n  }\n\n  const todayDate = String(DayAsString(currentDate.getDay()) + \"_\" + currentDate.getDate() + \"_\" + currentDate.getMonth());\n  useEffect(() => {\n    //function to download task from today.\n    if (user != undefined) {\n      db.collection(user.displayName).doc(\"ToDoList\").collection(todayDate) //todayDate\n      .orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n        setTasks(snapshot.docs.map(doc => ({\n          id: doc.id,\n          task: doc.data()\n        })));\n      });\n    }\n  }, [user]);\n\n  const useIsMount = () => {\n    //function to return, than first render or no\n    const isMountRef = useRef(true);\n    useEffect(() => {\n      isMountRef.current = false;\n    }, []);\n    return isMountRef.current;\n  };\n\n  const isMount = useIsMount();\n  useEffect(() => {\n    if (!isMount && tasks.length >= 1) {\n      let howManyTaskIsDone = 0;\n\n      for (let i = 0; i <= tasks.length - 1; i++) {\n        if (tasks[i].task.isDone == true) {\n          howManyTaskIsDone += 1;\n          setTaskDone(howManyTaskIsDone);\n        }\n      }\n    }\n  }, [tasks]);\n\n  function mouseOver() {\n    for (let i = 0; i = 6; i++) {\n      db.collection(user.displayName).doc(\"ToDoList\").collection(firebaseDates[i]) //todayDate\n      .orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n        console.log(snapshot);\n      });\n    }\n  }\n\n  useEffect(() => {\n    setPercent(Math.round(doneTasks / tasks.length * 100));\n  }, [tasks, doneTasks]);\n  var startDate = today;\n  var aryDates = GetDates(); //function to return today + 6 past day\n\n  const state = {\n    labels: [aryDates[0], aryDates[1], aryDates[2], aryDates[3], aryDates[4], aryDates[5], \"TODAY \" + doneTaskPercent + \"%\"],\n    datasets: [{\n      label: 'Rainfall',\n      backgroundColor: 'rgba(75,192,192,1)',\n      borderColor: 'rgba(0,0,0,1)',\n      borderWidth: 2,\n      data: [[0, 10], [0, 6], [0, 4], [0, 3], [0, 7], [1, 6], [0, doneTaskPercent]]\n    }]\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    onMouseEnter: mouseOver,\n    className: \"toDoChart__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 2\n    }\n  }, /*#__PURE__*/React.createElement(Bar, {\n    data: state,\n    options: {\n      title: {\n        display: true,\n        text: 'Average Rainfall per month',\n        fontSize: 20\n      },\n      legend: {\n        display: true,\n        position: 'right'\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/Users/kamil/Desktop/Programowanie/ygo/src/components/todo_chart/ToDoChart.js"],"names":["React","useState","useEffect","useRef","db","firebase","Bar","ToDoList","user","tasks","setTasks","doneTasks","setTaskDone","doneTaskPercent","setPercent","today","Date","DayAsString","dayIndex","weekdays","Array","GetDates","aryDates","i","currentDate","setDate","startDate","getDate","push","getDay","firebaseDates","getMonth","todayDate","String","undefined","collection","displayName","doc","orderBy","onSnapshot","snapshot","docs","map","id","task","data","useIsMount","isMountRef","current","isMount","length","howManyTaskIsDone","isDone","mouseOver","console","log","Math","round","state","labels","datasets","label","backgroundColor","borderColor","borderWidth","title","display","text","fontSize","legend","position"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport './ToDoChart.css'\nimport { db } from '../../firebase.js'\nimport firebase from \"firebase\"\nimport {Bar} from 'react-chartjs-2';\nexport default function ToDoList({user}) {\n    \n    const [tasks, setTasks] = useState([])\n    const [doneTasks, setTaskDone] = useState(0)\n    const [doneTaskPercent, setPercent] = useState(0)\n    \n\n    const today = new Date()\n    \n\n\n    const DayAsString = (dayIndex) => {\n      var weekdays = new Array(7);\n      weekdays[0] = \"Sunday\";\n      weekdays[1] = \"Monday\";\n      weekdays[2] = \"Tuesday\";\n      weekdays[3] = \"Wednesday\";\n      weekdays[4] = \"Thursday\";\n      weekdays[5] = \"Friday\";\n      weekdays[6] = \"Saturday\";\n  \n      return weekdays[dayIndex];\n  }\n  \n\n    const GetDates = () => {\n      var aryDates = [];\n     \n      for (var i = -6; i <= 0; i++) {\n          var currentDate = new Date();\n          currentDate.setDate(startDate.getDate() + i);\n          aryDates.push(DayAsString(currentDate.getDay()) + \", \" + currentDate.getDate());\n      }\n  \n      return aryDates;\n  }\n\n  const firebaseDates = []\n  for (var i = -6; i <= 0; i++) {\n      var currentDate = new Date();\n      currentDate.setDate(today.getDate() + i);\n      firebaseDates.push(DayAsString(currentDate.getDay()) + \"_\" + currentDate.getDate() + \"_\" +currentDate.getMonth());\n  }\n  const todayDate = String(DayAsString(currentDate.getDay()) + \"_\" + currentDate.getDate() + \"_\" +currentDate.getMonth());\n  \n    useEffect(() => {  //function to download task from today.\n        if(user!=undefined){   \n            db \n                .collection(user.displayName)\n                .doc(\"ToDoList\")\n                .collection(todayDate) //todayDate\n                .orderBy(\"timestamp\", \"desc\")\n                .onSnapshot((snapshot) =>{\n                    setTasks(snapshot.docs.map(doc => ({\n                        id: doc.id,\n                        task: doc.data()\n                        })));\n                        }) \n            } \n       \n    }, [user])\n\n\n\n\nconst useIsMount = () => { //function to return, than first render or no\n    const isMountRef = useRef(true);\n    useEffect(() => {\n      isMountRef.current = false;\n    }, []);\n    return isMountRef.current;\n  };\n\n\n    const isMount = useIsMount();\n  \n    useEffect(() => {\n      if (!isMount && tasks.length>=1) {\n        let howManyTaskIsDone = 0;\n        for(let i =0; i<=tasks.length-1; i++){\n             if(tasks[i].task.isDone == true){\n                howManyTaskIsDone+=1\n                setTaskDone(howManyTaskIsDone);\n                }\n        } \n      }\n    }, [tasks]);\n\nfunction mouseOver (){\n  for(let i=0; i=6; i++){\n  db \n  .collection(user.displayName)\n  .doc(\"ToDoList\")\n  .collection(firebaseDates[i]) //todayDate\n  .orderBy(\"timestamp\", \"desc\")\n  .onSnapshot((snapshot) =>{\n     console.log(snapshot)\n          }) \n}} \n    \n\n\n\n\n   useEffect(() =>{\n     setPercent(Math.round(doneTasks/tasks.length*100))\n   \n    },\n    [tasks, doneTasks])\n\n  \n   \n  \n  var startDate = today; \n  var aryDates = GetDates(); \n\n//function to return today + 6 past day\nconst state = {\n  labels: [aryDates[0], aryDates[1], aryDates[2],aryDates[3], aryDates[4], aryDates[5], \"TODAY \" + doneTaskPercent+\"%\"],\n  datasets: [\n    {\n      label: 'Rainfall',\n      backgroundColor: 'rgba(75,192,192,1)',\n      borderColor: 'rgba(0,0,0,1)',\n      borderWidth: 2,\n      data: [[0,10], [0,6], [0,4], [0,3], [0,7], [1,6], [0,doneTaskPercent]] \n    }\n  ]\n}\n    \n    return (\n    <div onMouseEnter={mouseOver} className=\"toDoChart__wrapper\">\n <div>\n        <Bar \n          data={state}\n          options={{\n            title:{\n              display:true,\n              text:'Average Rainfall per month',\n              fontSize:20\n            },\n            legend:{\n              display:true,\n              position:'right'\n            }\n          }}\n        />\n      </div>\n    </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}